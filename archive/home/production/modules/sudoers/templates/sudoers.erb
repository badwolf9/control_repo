#
# This file was autogenerated on <%= File.mtime("#{file}").strftime("%m/%d/%Y %T %Z") %> # by puppet <%= @puppetversion %>
# It can still be managed manually but will be overwritten on the next run.
# SVN <%= %x(svn info #{file} | grep Revision | tr -d "\n")%>
#
# Logfile
Defaults logfile=/var/log/sudo.log
<% if @lsbdistid =~ /Ubuntu/ -%>
Defaults	env_reset
Defaults	mail_badpass
Defaults	secure_path="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin"
<% end %>
## Host Aliases
Host_Alias	MMSERVERS = mf-mm*
Host_Alias      RPISERVERS = mf-rpi*

## User Aliases
User_Alias MFADMINS = martin, mafox

## Command Aliases
Cmnd_Alias SHELLS = /bin/sh, /bin/bash, /bin/csh, /bin/tcsh, /bin/ksh, /bin/zsh, /bin/dash
Cmnd_Alias SU = /bin/su
Cmnd_Alias SUDOERS = /usr/sbin/visudo, /usr/bin/vim /etc/sudoers, /bin/vi /etc/sudoers
Cmnd_Alias REBOOT = /sbin/reboot, /usr/bin/reboot
Cmnd_Alias POSTGRESQL = /etc/init.d/postgresql*, /bin/psql
Cmnd_Alias HTTPD = /etc/init.d/httpd*, /sbin/service httpd *, /usr/bin/systemctl * httpd.service
Cmnd_Alias PROCESSES = /bin/nice, /bin/kill, /usr/bin/kill, /usr/bin/killall
Cmnd_Alias MOUNT = /sbin/mount.cifs, /bin/umount, /bin/mount
#
Defaults    env_reset
Defaults    env_keep =  "COLORS DISPLAY HOSTNAME HISTSIZE INPUTRC KDEDIR LS_COLORS"
Defaults    env_keep += "MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE"
Defaults    env_keep += "LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES"
Defaults    env_keep += "LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE"
Defaults    env_keep += "LC_TIME LC_ALL LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY"

## Main part: which users can run what software 
## Syntax:
##      user    MACHINE=COMMANDS
## Allow root to run any commands anywhere
root    ALL=(ALL)       ALL

<% if @lsbdistid =~ /Arch/ -%>
%wheel	ALL=(ALL)			NOPASSWD: ALL
%adm	ALL=(ALL)			NOPASSWD: ALL
<% else %>
%admin	ALL=(ALL) ALL
%sudo	ALL=(ALL:ALL) ALL
<% end %>
#includedir /etc/sudoers.d



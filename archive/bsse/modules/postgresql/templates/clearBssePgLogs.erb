#!/bin/bash
# This file was autogenerated on <%= File.mtime("#{file}").strftime("%m/%d/%Y %T %Z") %> # by puppet <%= @puppetversion %>
# It can still be managed manually but will be overwritten on the next run.
# SVN <%= %x(svn info #{file} | grep Revision | tr -d "\n")%>
#
DAYS_TO_RETAIN=3
cd ~
. /etc/profile.d/postgres9.sh
ARCH_DIR=$1
BACK_FILE=`find $ARCH_DIR -name \*.backup -mtime $DAYS_TO_RETAIN`
#
basename $BACK_FILE
pg_archivecleanup -d $ARCH_DIR `basename $BACK_FILE`
find $ARCH_DIR -name \*.backup -mtime +$DAYS_TO_RETAIN -exec rm {} \;
